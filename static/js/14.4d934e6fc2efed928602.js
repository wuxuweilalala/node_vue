webpackJsonp([14],{"97pD":function(t,a){},QHBX:function(t,a){},dqBe:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Gu7T"),n=e.n(s),l=e("//Fk"),i=e.n(l),o=e("mvHQ"),r=e.n(o),d=e("Gr2z"),c=(e("BMXX"),e("kpTV"),{name:"dataSourceTable",components:{HotTable:d.a},props:["dataList","chosen"],data:function(){var t=this;return{userid:localStorage.getItem("userid"),token:localStorage.getItem("token"),field:null,addShow:!1,dataShow:!1,totalPage:null,handsonTable:null,HotTableTh:[],page:1,limit:30,tableObj:[],tipsData:{text:"",rel:"",time:1500},scrollOpt:{barColor:"#95A0B6",barWidth:6,railColor:"#475566",barMarginRight:0,barOpacityMin:.3},setHotTable:{data:[],width:"77.1vw",height:"83.3vh",rowHeaders:!1,colHeaders:[],readOnly:!0,stretchH:"all",className:"htLeft",currentColClassName:"currentCol",manualColumnResize:!0,autoWrapRow:!0,language:"zh-CN",fillHandle:!1,afterScrollVertically:function(){var a=t.$refs.testHot.$el.children[0].children[0];a.children[0].offsetHeight-a.offsetHeight<=a.scrollTop+5&&(t.page++,t.page<=t.totalPage&&t.requestData(t.page))}}}},methods:{requestData:function(t){var a=this,e=this;return e.$get("api/tableInfo",{source_sn:e.dataList.source_sn,id:e.dataList.id,page:t,limit:30}).then(function(s){var l=JSON.parse(r()(s.data)),o=void 0;if("000000"==s.code){if(e.dataShow=!0,1==t){if(0===l.tableinfo.length){var d=new Array(l.head.length).fill("");o=new Array(26).fill(d),l.tableinfo=o}else l.tableinfo.length<30&&(e.setHotTable.minSpareRows=26-l.tableinfo.length);e.setHotTable.data=l.tableinfo,e.setHotTable.colHeaders=l.head,i.a.resolve()}else{var c;(c=e.setHotTable.data).push.apply(c,n()(l.tableinfo))}e.totalPage=l.total_page}else a.tips.show([s.err_msg.split(":")[1]])},function(t){})}},watch:{chosen:{handler:function(t,a){var e=this.handsonTable.propToCol(t.Field);this.handsonTable.selectColumns(e)}},dataList:{handler:function(t,a){this.requestData(1),this.setHotTable.data=null,this.setHotTable.colHeaders=null,this.heads=null}}},mounted:function(){var t=this;this.requestData(1).then(function(){t.$nextTick(function(){t.handsonTable=t.$refs.testHot.hotInstance})})}}),h={render:function(){var t=this.$createElement,a=this._self._c||t;return this.dataShow?a("div",{staticClass:"dataTable"},[a("div",{staticClass:"table"},[a("hot-table",{ref:"testHot",attrs:{settings:this.setHotTable,licenseKey:"non-commercial-and-evaluation"}})],1)]):this._e()},staticRenderFns:[]};var u=e("VU/8")(c,h,!1,function(t){e("QHBX")},"data-v-b69eee80",null).exports,f={name:"myDataSource",components:{DataSource:e("RFLx").default,DataShow:u},data:function(){return{dataList:{id:null},chosen:null,myDataBack:"",addShow:!1,dataTable:!1,requestUrl:"api/dataInfo",dataTitle:{title:"数据源",icon:"dataBase"}}},mounted:function(){},methods:{dataListEvent:function(t){var a=this;t.id!=this.dataList.id&&(this.dataTable=!1,this.$nextTick(function(){a.dataTable=!0}),this.dataList=t)},chosenDataEvent:function(t){this.chosen=t.field,this.dataListEvent(t.data)}}},v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"myData"},[e("div",{staticClass:"title"},[e("span",{staticClass:"vertical"}),t._v(" "),e("span",{staticClass:"titleText unSelect"},[t._v("我的数据源")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.addShow,expression:"addShow"}],staticClass:"btn mainBtn"},[e("i",{staticClass:"icon biFont icon-add addData unSelect"}),t._v(" "),e("span",{staticClass:"unSelect"},[t._v("添加数据")])])]),t._v(" "),e("DataSource",{staticClass:"data-source",attrs:{dataTitle:t.dataTitle,requestUrl:t.requestUrl},on:{myDataBack:t.dataListEvent,chosenDataBack:t.chosenDataEvent}}),t._v(" "),t.dataTable?e("DataShow",t._b({staticClass:"data-table"},"DataShow",{dataList:t.dataList,chosen:t.chosen},!1)):t._e()],1)},staticRenderFns:[]};var b=e("VU/8")(f,v,!1,function(t){e("97pD")},"data-v-6e89d398",null);a.default=b.exports}});