webpackJsonp([20],{ESSE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("kBYy"),o=a.n(s),n={name:"runOrder",components:{IEcharts:a("sE1n").a,Paginate:o.a},data:function(){return{searchVal:"",orderType:["无"],payType:["无"],isMaidenType:["无"],pageQuantity:1,page:0,forcePage:1,pageClickBl:!0,dropDownIconBl:!1,abilityOverview:{tooltip:{},xAxis:{data:[],show:!0,axisLabel:{color:"#fff",fontSize:"12"}},grid:{x:60,x2:40,y:30,y2:30},visualMap:{show:!1,min:1,max:31,dimension:0,inRange:{color:["#1d7cfa","#00f8ff","#f86e81"]}},yAxis:{type:"value",show:!0,inverse:!1,axisLabel:{verticalAlign:"middle",color:"#fff",fontSize:"12"},splitLine:{show:!0,lineStyle:{color:"#2d3540"}},axisLine:{show:!0},axisTick:{show:!0}},series:[{name:"",type:"pictorialBar",symbol:"rect",barWidth:"30",symbolMargin:"50%",itemStyle:{normal:{barBorderRadius:5}},symbolRepeat:!0,symbolSize:["70%","15%"],data:[]}]},dropDownObj:{orderType:!1,payType:!1,firstBuy:!1,mouseleaveorderType:!1,mouseleavepayType:!1,mouseleavefirstBuy:!1},tbodyArr:[{nickname:"小明",phone:"18888888888",topup_number:"9527",topup_state:"已支付",topup_money:"999",topup_type:"支付宝",topup_way:"否",isBuy:"是"}],consumeTypeSortBl:3,prefix:"",url:"",requestType:"所有",filterIndex:0,dataSort:0}},methods:{onClick:function(e){this.echartsClick(e,"api/trendRecord",this.consumeTypeSortBl)},echartsClick:function(e,t,a){e.name.indexOf("年")>=0?this.postFn(e.name,1,a,t):e.name.indexOf("月")>=0&&this.postFn(e.name,2,a,t)},postFn:function(e,t,a,s){var o=this;this.$post(s,{type:a,date:parseInt(e),dateType:t,isMember:2}).then(function(e){if("000000"==e.code)if(e.data){var a=[],s=[];if(1==t)for(var n in e.data)0!=n&&e.data[n]&&(a.push(e.data[n].money),s.push(e.data[n].monthly+"月"));else if(2==t)for(var i in e.data)0!=i&&(e.data[i]?(a.push(e.data[i].money),s.push(parseInt(i)+"日")):(a.push(0),s.push(parseInt(i)+"日")));o.abilityOverview.xAxis.data=s,o.abilityOverview.series[0].data=a}else o.$store.dispatch("publicTools/setTipsData",["年暂时没有充值数据"])})},clickCallback:function(e){"所有"==this.requestType?this.pagesCallback(e,this.url,this.prefix,0,"所有",this.dataSort):this.pagesCallback(e,this.url,this.prefix,this.filterIndex,this.requestType,this.dataSort)},jumpPage:function(e){this.pageClickBl&&(e.x<e.y?this.forcePage-10>0?this.clickCallback(this.forcePage-10):this.clickCallback(1):this.forcePage+10<this.pageQuantity?this.clickCallback(this.forcePage+10):this.clickCallback(this.pageQuantity))},pagesCallback:function(e,t,a,s,o,n){var i=this;if(this.pageClickBl){var r=e+"&value="+(s-1)+"&condition="+o+"&sort="+n;0==s&&"模糊搜索"!=o&&(r=e+"&sort="+n),"模糊搜索"==o&&(r=e+"&value="+s+"&condition="+o+"&sort="+n),this.pageClickBl=!1,this.$get(t+r).then(function(t){if(i.pageClickBl=!0,"000000"==t.code){var r=t.data[a+"order_data"];i.forcePage=e,i.dataSort=n,"所有"!=o?(i.requestType=o,i.filterIndex=s):i.requestType="所有";var p=[];if(r)for(var c=0;c<r.length;c++)r[c].isBuy||(r[c].isBuy="无"),p.push({nickname:r[c].nickname,phone:r[c].phone,topup_number:r[c][a+"number"],topup_state:r[c][a+"state"],topup_type:r[c][a+"type"],topup_money:r[c][a+"money"],topup_way:r[c][a+"way"],isBuy:r[c].isBuy});else p.push({nickname:"无",phone:"无",topup_number:"无",topup_type:"无",topup_state:"无",topup_money:"无",isBuy:"无",topup_way:"无"});for(var l in t.data.count?i.pageQuantity=t.data.count:i.pageQuantity=1,i.tbodyArr=p,i.dropDownObj)i.dropDownObj[l]=!1}})}},orderTypeClick:function(e){this.consumeTypeSortBl=e,3==e?(this.prefix="topup_",this.url="api/topupOrderAdmin?page="):2==e?(this.prefix="consume_",this.url="api/consumeOrderAdmin?page="):1==e&&(this.prefix="income_",this.url="api/incomeOrderAdmin?page="),this.pagesCallback(1,this.url,this.prefix,0,"所有",0),this.postFn(2019,1,this.consumeTypeSortBl,"api/trendRecord")},closIsDrop:function(e){e.inquire?this[e.inquire]=!1:this.dropDownObj[e.msg]=!1},dropDownFn:function(e){for(var t in this.dropDownObj)this.dropDownObj[t]=t==e}},mounted:function(){var e=this;this.orderTypeClick(3),this.postFn(2019,1,this.consumeTypeSortBl,"api/trendRecord"),this.$get("api/sizerCondition").then(function(t){"000000"==t.code&&(t.data.orderType.unshift("全部"),t.data.payType.unshift("全部"),t.data.isMaidenType.unshift("全部"),e.orderType=t.data.orderType,e.payType=t.data.payType,e.isMaidenType=t.data.isMaidenType)})}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"basicInfo"},[e._m(0),e._v(" "),s("div",{staticClass:"contact1"},[s("div",{staticClass:"subTitle"},[e._v("\n        订单趋势\n        "),e._e(),e._v(" "),s("span",{staticClass:"firstLevel",on:{click:function(t){return e.postFn(2019,1,e.consumeTypeSortBl,"api/trendRecord")}}},[e._v("返回首级")])]),e._v(" "),s("div",{staticClass:"runVIPEcharts",staticStyle:{width:"83.8vw",height:"24.3vh"}},[s("IEcharts",{staticStyle:{width:"83.8vw",height:"24.3vh"},attrs:{options:e.abilityOverview},on:{click:e.onClick}})],1)]),e._v(" "),s("div",{staticClass:"contact2"},[s("div",{staticClass:"subTitle"},[s("span",{class:{consumeTypeSort:!0,bgc:3==e.consumeTypeSortBl},on:{click:function(t){return e.orderTypeClick(3)}}},[e._v("充值列表")]),e._v(" "),s("span",{class:{consumeTypeSort:!0,bgc:2==e.consumeTypeSortBl},on:{click:function(t){return e.orderTypeClick(2)}}},[e._v("消费列表")]),e._v(" "),s("span",{class:{consumeTypeSort:!0,bgc:1==e.consumeTypeSortBl},on:{click:function(t){return e.orderTypeClick(1)}}},[e._v("收入清单")]),e._v(" "),s("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{fn:e.closIsDrop,arg:{inquire:"dropDownIconBl"}},expression:"{fn:closIsDrop,arg:{inquire:'dropDownIconBl'}}"}],staticClass:"order",on:{click:function(t){t.stopPropagation(),e.dropDownIconBl=!e.dropDownIconBl}}},[s("i",{staticClass:"icon biFont icon-order"}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.dropDownIconBl,expression:"dropDownIconBl"}],staticClass:"dropDownIcon"},[s("span",{on:{click:function(t){return e.pagesCallback(1,e.url,e.prefix,e.filterIndex,e.requestType,0)}}},[s("span",{staticClass:"icon biFont icon-descend"}),e._v(" "),s("span",[e._v("升序")])]),e._v(" "),s("span",{on:{click:function(t){return e.pagesCallback(1,e.url,e.prefix,e.filterIndex,e.requestType,1)}}},[s("span",{staticClass:"icon biFont icon-ascend"}),e._v(" "),s("span",[e._v("降序")])])])]),e._v(" "),e._m(1),e._v(" "),s("span",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchVal,expression:"searchVal"}],attrs:{type:"text"},domProps:{value:e.searchVal},on:{blur:function(t){return e.pagesCallback(1,e.url,e.prefix,e.searchVal,"模糊搜索",0)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.pagesCallback(1,e.url,e.prefix,e.searchVal,"模糊搜索",0)},input:function(t){t.target.composing||(e.searchVal=t.target.value)}}}),e._v(" "),s("span",{staticClass:"icon userCenterFont icon-search",on:{click:function(t){return e.pagesCallback(1,e.url,e.prefix,e.searchVal,"模糊搜索",0)}}})]),e._v(" "),s("span",{staticClass:"searchText"},[e._v("搜索：")])]),e._v(" "),s("div",{staticClass:"runVIPTable",staticStyle:{width:"83.8vw",height:"49vh"}},[s("table",[s("thead",[s("tr",[s("th",{staticClass:"userAppellation"},[e._v("用户名称")]),e._v(" "),s("th",{staticClass:"userPhone"},[e._v("手机号码")]),e._v(" "),s("th",{staticClass:"orderNum"},[e._v("订单号")]),e._v(" "),s("th",{staticClass:"orderType"},[e._v("订单状态\n                "),e.dropDownObj.orderType?e._e():s("span",[e.dropDownObj.mouseleaveorderType?e._e():s("img",{staticClass:"triangle",attrs:{src:a("ZZr5"),alt:""},on:{click:function(t){return t.stopPropagation(),e.dropDownFn("orderType")},mouseenter:function(t){e.dropDownObj.mouseleaveorderType=!0}}}),e._v(" "),e.dropDownObj.mouseleaveorderType?s("img",{staticClass:"triangle",attrs:{src:a("GnqS"),alt:""},on:{click:function(t){return t.stopPropagation(),e.dropDownFn("orderType")},mouseleave:function(t){e.dropDownObj.mouseleaveorderType=!1}}}):e._e()]),e._v(" "),e.dropDownObj.orderType?s("span",[e.dropDownObj.mouseleaveorderType?e._e():s("img",{staticClass:"triangle",attrs:{src:a("gCe4"),alt:""},on:{click:function(t){t.stopPropagation(),e.dropDownObj.orderType=!1},mouseenter:function(t){e.dropDownObj.mouseleaveorderType=!0}}}),e._v(" "),e.dropDownObj.mouseleaveorderType?s("img",{staticClass:"triangle",attrs:{src:a("07tH"),alt:""},on:{click:function(t){t.stopPropagation(),e.dropDownObj.orderType=!1},mouseleave:function(t){e.dropDownObj.mouseleaveorderType=!1}}}):e._e()]):e._e(),e._v(" "),e.dropDownObj.orderType?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{fn:e.closIsDrop,arg:{msg:"orderType"}},expression:"{fn:closIsDrop,arg:{msg:'orderType'}}"}],staticClass:"dropDown"},e._l(e.orderType,function(t,a){return s("span",{key:a,on:{click:function(t){return e.pagesCallback(1,e.url,e.prefix,a,"订单状态",0)}}},[e._v(e._s(t))])}),0):e._e()]),e._v(" "),s("th",{staticClass:"payType"},[e._v("支付类型\n                "),e.dropDownObj.payType?e._e():s("span",[e.dropDownObj.mouseleavepayType?e._e():s("img",{staticClass:"triangle",attrs:{src:a("ZZr5"),alt:""},on:{click:function(t){return t.stopPropagation(),e.dropDownFn("payType")},mouseenter:function(t){e.dropDownObj.mouseleavepayType=!0}}}),e._v(" "),e.dropDownObj.mouseleavepayType?s("img",{staticClass:"triangle",attrs:{src:a("GnqS"),alt:""},on:{click:function(t){return t.stopPropagation(),e.dropDownFn("payType")},mouseleave:function(t){e.dropDownObj.mouseleavepayType=!1}}}):e._e()]),e._v(" "),e.dropDownObj.payType?s("span",[e.dropDownObj.mouseleavepayType?e._e():s("img",{staticClass:"triangle",attrs:{src:a("gCe4"),alt:""},on:{click:function(t){t.stopPropagation(),e.dropDownObj.payType=!1},mouseenter:function(t){e.dropDownObj.mouseleavepayType=!0}}}),e._v(" "),e.dropDownObj.mouseleavepayType?s("img",{staticClass:"triangle",attrs:{src:a("07tH"),alt:""},on:{click:function(t){t.stopPropagation(),e.dropDownObj.payType=!1},mouseleave:function(t){e.dropDownObj.mouseleavepayType=!1}}}):e._e()]):e._e(),e._v(" "),e.dropDownObj.payType?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{fn:e.closIsDrop,arg:{msg:"payType"}},expression:"{fn:closIsDrop,arg:{msg:'payType'}}"}],staticClass:"dropDown"},e._l(e.payType,function(t,a){return s("span",{key:a,on:{click:function(t){return e.pagesCallback(1,e.url,e.prefix,a,"支付类型",0)}}},[e._v(e._s(t))])}),0):e._e()]),e._v(" "),s("th",{staticClass:"parMoney"},[e._v("支付金额")]),e._v(" "),s("th",{staticClass:"firstBuy"},[e._v("是否首次购买\n                "),e.dropDownObj.firstBuy?e._e():s("span",[e.dropDownObj.mouseleavefirstBuy?e._e():s("img",{staticClass:"triangle",attrs:{src:a("ZZr5"),alt:""},on:{click:function(t){return t.stopPropagation(),e.dropDownFn("firstBuy")},mouseenter:function(t){e.dropDownObj.mouseleavefirstBuy=!0}}}),e._v(" "),e.dropDownObj.mouseleavefirstBuy?s("img",{staticClass:"triangle",attrs:{src:a("GnqS"),alt:""},on:{click:function(t){return t.stopPropagation(),e.dropDownFn("firstBuy")},mouseleave:function(t){e.dropDownObj.mouseleavefirstBuy=!1}}}):e._e()]),e._v(" "),e.dropDownObj.firstBuy?s("span",[e.dropDownObj.mouseleavefirstBuy?e._e():s("img",{staticClass:"triangle",attrs:{src:a("gCe4"),alt:""},on:{click:function(t){t.stopPropagation(),e.dropDownObj.firstBuy=!1},mouseenter:function(t){e.dropDownObj.mouseleavefirstBuy=!0}}}),e._v(" "),e.dropDownObj.mouseleavefirstBuy?s("img",{staticClass:"triangle",attrs:{src:a("07tH"),alt:""},on:{click:function(t){t.stopPropagation(),e.dropDownObj.firstBuy=!1},mouseleave:function(t){e.dropDownObj.mouseleavefirstBuy=!1}}}):e._e()]):e._e(),e._v(" "),e.dropDownObj.firstBuy?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:{fn:e.closIsDrop,arg:{msg:"firstBuy"}},expression:"{fn:closIsDrop,arg:{msg:'firstBuy'}}"}],staticClass:"dropDown"},e._l(e.isMaidenType,function(t,a){return s("span",{key:a,on:{click:function(t){return e.pagesCallback(1,e.url,e.prefix,a,"是否首次购买",0)}}},[e._v(e._s(t))])}),0):e._e()]),e._v(" "),s("th",{staticClass:"modify"},[e._v("操作")])])]),e._v(" "),s("tbody",e._l(e.tbodyArr,function(t,a){return s("tr",{key:a},[s("td",{staticClass:"userAppellation"},[e._v(e._s(t.nickname))]),e._v(" "),s("td",[e._v(e._s(t.phone))]),e._v(" "),s("td",[e._v(e._s(t.topup_number))]),e._v(" "),s("td",[e._v(e._s(t.topup_state))]),e._v(" "),s("td",[e._v(e._s(t.topup_way))]),e._v(" "),s("td",[e._v(e._s(t.topup_money))]),e._v(" "),s("td",[e._v(e._s(t.isBuy))]),e._v(" "),e._m(2,!0)])}),0)])])]),e._v(" "),s("paginate",{attrs:{"page-count":e.pageQuantity,"margin-pages":1,"force-page":e.forcePage,"page-range":10,"page-class":"page-item","page-link-class":"item","container-class":"ui pagination menu","prev-text":"<","next-text":">","prev-link-class":"item","next-link-class":"item","break-view-class":"break-view","break-view-link-class":"break-view-link","click-handler":e.clickCallback,"no-li-surround":!0}},[s("span",{attrs:{slot:"breakViewContent"},on:{click:e.jumpPage},slot:"breakViewContent"},[s("svg",{attrs:{width:"16",height:"4",viewBox:"0 0 16 4"}},[s("circle",{attrs:{fill:"#999999",cx:"2",cy:"2",r:"2"}}),e._v(" "),s("circle",{attrs:{fill:"#999999",cx:"8",cy:"2",r:"2"}}),e._v(" "),s("circle",{attrs:{fill:"#999999",cx:"14",cy:"2",r:"2"}})])])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Btitle"},[t("span",{staticClass:"basicData"},[this._v("订单管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"break"},[t("span",{staticClass:"icon biFont icon-reset"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("td",[t("span",{staticClass:"icon biFont icon-edit"})])}]};var r=a("VU/8")(n,i,!1,function(e){a("ivMQ")},"data-v-78b62fbb",null);t.default=r.exports},ivMQ:function(e,t){}});